<nav
  class="sticky top-4 w-full bg-white border rounded-md shadow-sm border-gray-200"
  [class.z-50]="isSideMenuVisible()"
>
  <div class="w-full flex flex-wrap items-center justify-between mx-auto py-4 px-4">
    <div class="flex items-center space-x-8">
      <a href="#" class="flex items-center">
        <img src="https://flowbite.com/docs/images/logo.svg" class="h-6 mr-3" />
        <span class="text-xl font-semibold">Flowbite</span>
      </a>

      <ul class="flex space-x-6">
        <li class="hover:scale-105"><a href="#" class="hover:underline">Home</a></li>
        <li class="hover:scale-105"><a href="#" class="hover:underline">About</a></li>
        <li class="hover:scale-105"><a href="#" class="hover:underline">Services</a></li>
      </ul>
    </div>

    <button
      class="relative p-2 cursor-pointer hover:scale-105 transition"
      (click)="toggleSideMenu()"
    >
      <!-- Badge -->
      @if (cart().length > 0) {
        <div
          class="absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center rounded-b-lg bg-blue-500 text-white text-xs font-semibold"
        >
          {{ cart().length }}
        </div>
      }

      <!-- Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="#151515"
        viewBox="0 0 24 24"
        stroke-width="1"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M18 7h-3V6a3 3 0 0 0-6 0v1H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1z"
        />
      </svg>
    </button>
  </div>
</nav>
@if (!isSideMenuVisible()) {
  <div
    class="fixed inset-0 bg-black/40 backdrop-blur-sm z-30 transition-opacity"
    (click)="toggleSideMenu()"
  ></div>
}
<div
  class="fixed translate-y-[-50%] top-[50%] h-[95%] w-96 bg-white z-40 shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col rounded-2xl"
  [class.right-4]="!isSideMenuVisible()"
  [class.right-0]="isSideMenuVisible()"
  [class.translate-x-full]="isSideMenuVisible()"
>
  <div class="flex justify-between items-center p-4 border-b cursor-pointer">
    <p class="w-full text-xl font-semibold text-center">My Cart</p>

    <button
      (click)="toggleSideMenu()"
      class="text-gray-500 hover:text-blue-500 hover:scale-110 transition"
    >
      ✕
    </button>
  </div>

  <div class="flex-1 overflow-y-auto p-4 flex flex-col gap-4">
    @for (productCart of cart(); track productCart.product.id) {
      <div class="grid grid-cols-[80px_1fr_auto] gap-4 items-center">
        <img class="w-20 h-20 object-cover rounded-lg" [src]="productCart.product.image" />

        <div>
          <p class="font-semibold">
            {{ productCart.product.title }}
          </p>

          <p class="text-sm text-gray-500">{{ productCart.product.price }} COP</p>

          <p class="text-sm">Quantity: {{ productCart.quantity }}</p>
        </div>

        <button
          (click)="removeFromCart(productCart.product.id)"
          class="text-gray-400 hover:text-blue-500 transition cursor-pointer"
        >
          ✕
        </button>
      </div>
    }
  </div>

  @if (cart().length > 0) {
    <div class="border-t p-4 flex items-center gap-4">
      <p class="flex-1 font-semibold">Total: {{ total() }} COP</p>

      <button
        class="px-5 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg cursor-pointer transition hover:scale-105"
      >
        Checkout
      </button>
    </div>
  }
</div>
